(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const u of h.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function e(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(s){if(s.ep)return;s.ep=!0;const h=e(s);fetch(s.href,h)}})();function m(t,i){t.fillStyle="#87ceeb",t.fillRect(0,0,i.width,i.height*.7);const e=t.createLinearGradient(0,i.height*.7,0,i.height);e.addColorStop(0,"darkgreen"),e.addColorStop(1,"black"),t.fillStyle=e,t.fillRect(0,i.height*.7,i.width,i.height*.3);for(let o=0;o<i.width;o+=85)t.fillStyle="#556B2F",t.fillRect(o,i.height*.7-60,6,60),t.fillStyle="#8B4513",t.fillRect(o,i.height*.7-76,6,25);t.fillStyle="yellow",t.beginPath(),t.arc(i.width-100,100,50,0,Math.PI*2),t.fill(),t.fillStyle="white",t.beginPath(),t.arc(150,100,40,0,Math.PI*2),t.arc(200,100,50,0,Math.PI*2),t.arc(250,100,40,0,Math.PI*2),t.fill(),t.fillStyle="white",t.beginPath(),t.arc(450,150,40,0,Math.PI*2),t.arc(500,150,50,0,Math.PI*2),t.arc(550,150,40,0,Math.PI*2),t.fill()}const y=[{x:150,y:400,width:100,height:20},{x:350,y:400,width:100,height:20},{x:550,y:400,width:100,height:20}];function p(t){t.fillStyle="#00ca33",y.forEach(i=>{t.fillRect(i.x,i.y,i.width,i.height)})}function w(t,i){t.fillStyle="white",t.font="20px sans-serif",t.fillText(`Score: ${i}`,10,30)}function v(t,i){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.height+t.y>i.y}class x{constructor(i,e){this.x=i,this.y=e,this.size=Math.random()*5+2,this.vx=(Math.random()-.5)*4,this.vy=Math.random()*-2-2,this.gravity=.1,this.alpha=1}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,this.alpha-=.05}draw(i){i.fillStyle=`rgba(173, 216, 230, ${this.alpha})`,i.fillRect(this.x,this.y,this.size,this.size)}}function S(t,i,e){for(let o=0;o<4;o++)e.push(new x(t,i))}class P{constructor(i,e,o,s,h){this.canvas=i,this.ctx=e,this.width=40,this.height=50,this.vx=0,this.vy=0,this.jumpPower=-15,this.gravity=.5,this.speed=5,this.isJumping=!1,this.jumpSound=new Audio("./assets/8-bit-jump.mp3"),this.soundPlayed=!1,this.isDrowned=!1,this.splashes=o,this.drownSound=new Audio("./assets/8-bit-water-drop.wav"),this.setGameRunning=s,this.resetScore=h,this.resetPosition()}resetPosition(){this.x=this.canvas.width/2-this.width/2,this.y=this.canvas.height*.68-this.height,this.isDrowned=!1,this.vx=0,this.vy=0}draw(){if(this.isDrowned)return;const{ctx:i}=this;i.fillStyle="green",i.fillRect(this.x,this.y,this.width,this.height),i.fillStyle="white",i.fillRect(this.x+5,this.y+5,10,10),i.fillRect(this.x+25,this.y+5,10,10),i.fillStyle="red",i.fillRect(this.x+10,this.y+25,20,5),i.fillStyle="darkgreen",i.fillRect(this.x-10,this.y+30,10,20),i.fillRect(this.x+40,this.y+30,10,20)}update(){this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy;let i=!1;for(const e of y)this.y+this.height>e.y&&this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height<=e.y+e.height&&(i=!0,this.y=e.y-this.height,this.vy=0,this.isJumping=!1,this.soundPlayed=!1);!i&&this.y+this.height>this.canvas.height*.7&&this.drown(),this.x<0&&(this.x=0),this.x+this.width>this.canvas.width&&(this.x=this.canvas.width-this.width)}jump(){this.isJumping||(this.vy=this.jumpPower,this.isJumping=!0,this.soundPlayed||(this.jumpSound.currentTime=0,this.jumpSound.play(),this.soundPlayed=!0))}moveLeft(){this.vx=-this.speed}moveRight(){this.vx=this.speed}stop(){this.vx=0}drown(){S(this.x+this.width/2,this.y+this.height,this.splashes),this.isDrowned=!0,this.soundPlayed||(this.drownSound.currentTime=0,this.drownSound.play(),this.soundPlayed=!0),setTimeout(()=>{this.setGameRunning(!1),this.resetScore(),document.getElementById("gameOverText").style.display="block",document.getElementById("playButton").innerText="Play",this.resetPosition()},1e3)}}class R{constructor(i,e){this.canvas=i,this.ctx=e,this.width=10,this.height=10,this.x=Math.random()*i.width,this.y=Math.random()*(i.height-200),this.speedX=(Math.random()-.5)*5,this.speedY=(Math.random()-.5)*5}draw(){this.ctx.fillStyle="black",this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.fillStyle="white";const i=Math.sin(Date.now()/100)*2;this.ctx.fillRect(this.x-i,this.y-5,5,10),this.ctx.fillRect(this.x+this.width+i,this.y-5,5,10)}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x<0||this.x+this.width>this.canvas.width)&&(this.speedX*=-1),(this.y<0||this.y+this.height>this.canvas.height*.7)&&(this.speedY*=-1)}}const n=document.getElementById("gameCanvas"),r=n.getContext("2d");n.width=800;n.height=600;const a=new Audio("./assets/game-music.mp3");a.loop=!0;a.volume=.5;let d=!1;function M(t){d=t}const c=[],l=new P(n,r,c,M,b),I=Array.from({length:5},()=>new R(n,r));let f=0;function L(){const t=document.querySelector(".info");t&&t.remove()}function b(){f=0}document.getElementById("playButton").addEventListener("click",()=>{d||(document.getElementById("gameOverText").style.display="none",L()),d=!d,document.getElementById("playButton").innerText=d?"Pause":"Play",document.getElementById("playButton").blur()});document.addEventListener("keydown",t=>{t.code==="ArrowLeft"&&l.moveLeft(),t.code==="ArrowRight"&&l.moveRight(),t.code==="ArrowUp"&&(t.preventDefault(),l.jump())});document.addEventListener("keyup",t=>{(t.code==="ArrowLeft"||t.code==="ArrowRight")&&l.stop()});function g(){d?(r.clearRect(0,0,n.width,n.height),m(r,n),p(r),l.update(),l.draw(r),I.forEach(t=>{t.update(),t.draw(r),v(l,t)&&(f++,t.x=Math.random()*n.width,t.y=Math.random()*(n.height-200))}),w(r,f),c.forEach((t,i)=>{t.update(),t.draw(r),t.alpha<=0&&c.splice(i,1)}),a.play()):(a.pause(),a.currentTime=0),requestAnimationFrame(g)}g();
