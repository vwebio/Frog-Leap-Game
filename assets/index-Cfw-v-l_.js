(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))h(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&h(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();function m(t,i){t.fillStyle="#87ceeb",t.fillRect(0,0,i.width,i.height*.7);const e=t.createLinearGradient(0,i.height*.7,0,i.height);e.addColorStop(0,"darkgreen"),e.addColorStop(1,"black"),t.fillStyle=e,t.fillRect(0,i.height*.7,i.width,i.height*.3);for(let h=0;h<i.width;h+=85)t.fillStyle="#556B2F",t.fillRect(h,i.height*.7-60,6,60),t.fillStyle="#8B4513",t.fillRect(h,i.height*.7-76,6,25);t.fillStyle="yellow",t.beginPath(),t.arc(i.width-100,100,50,0,Math.PI*2),t.fill(),t.fillStyle="white",t.beginPath(),t.arc(150,100,40,0,Math.PI*2),t.arc(200,100,50,0,Math.PI*2),t.arc(250,100,40,0,Math.PI*2),t.fill(),t.fillStyle="white",t.beginPath(),t.arc(450,150,40,0,Math.PI*2),t.arc(500,150,50,0,Math.PI*2),t.arc(550,150,40,0,Math.PI*2),t.fill()}const a=[{x:150,y:400,width:100,height:20},{x:350,y:400,width:100,height:20},{x:550,y:400,width:100,height:20}];function w(t){t.fillStyle="#00ca33",a.forEach(i=>{t.fillRect(i.x,i.y,i.width,i.height)})}function p(t,i){t.fillStyle="white",t.font="20px sans-serif",t.fillText(`Score: ${i}`,10,30)}function v(t,i){return t.x<i.x+i.width&&t.x+t.width>i.x&&t.y<i.y+i.height&&t.height+t.y>i.y}class x{constructor(i,e){this.x=i,this.y=e,this.size=Math.random()*5+2,this.vx=(Math.random()-.5)*4,this.vy=Math.random()*-2-2,this.gravity=.1,this.alpha=1}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=this.gravity,this.alpha-=.05}draw(i){i.fillStyle=`rgba(173, 216, 230, ${this.alpha})`,i.fillRect(this.x,this.y,this.size,this.size)}}function S(t,i,e){for(let h=0;h<4;h++)e.push(new x(t,i))}class P{constructor(i,e,h,s){this.canvas=i,this.ctx=e,this.width=40,this.height=50,this.vx=0,this.vy=0,this.jumpPower=-15,this.gravity=.5,this.speed=5,this.isJumping=!1,this.jumpSound=new Audio("src/assets/sounds/8-bit-jump.mp3"),this.soundPlayed=!1,this.isDrowned=!1,this.splashes=h,this.drownSound=new Audio("src/assets/sounds/8-bit-water-drop.wav"),this.setGameRunning=s,this.resetPosition()}resetPosition(){this.x=this.canvas.width/2-this.width/2,this.y=this.canvas.height*.68-this.height,this.isDrowned=!1,this.vx=0,this.vy=0}draw(){if(this.isDrowned)return;const{ctx:i}=this;i.fillStyle="green",i.fillRect(this.x,this.y,this.width,this.height),i.fillStyle="white",i.fillRect(this.x+5,this.y+5,10,10),i.fillRect(this.x+25,this.y+5,10,10),i.fillStyle="red",i.fillRect(this.x+10,this.y+25,20,5),i.fillStyle="darkgreen",i.fillRect(this.x-10,this.y+30,10,20),i.fillRect(this.x+40,this.y+30,10,20)}update(){this.vy+=this.gravity,this.x+=this.vx,this.y+=this.vy;let i=!1;for(const e of a)this.y+this.height>e.y&&this.x+this.width>e.x&&this.x<e.x+e.width&&this.y+this.height<=e.y+e.height&&(i=!0,this.y=e.y-this.height,this.vy=0,this.isJumping=!1,this.soundPlayed=!1);!i&&this.y+this.height>this.canvas.height*.7&&this.drown(),this.x<0&&(this.x=0),this.x+this.width>this.canvas.width&&(this.x=this.canvas.width-this.width)}jump(){this.isJumping||(this.vy=this.jumpPower,this.isJumping=!0,this.soundPlayed||(this.jumpSound.currentTime=0,this.jumpSound.play(),this.soundPlayed=!0))}moveLeft(){this.vx=-this.speed}moveRight(){this.vx=this.speed}stop(){this.vx=0}drown(){S(this.x+this.width/2,this.y+this.height,this.splashes),this.isDrowned=!0,this.soundPlayed||(this.drownSound.currentTime=0,this.drownSound.play(),this.soundPlayed=!0),setTimeout(()=>{this.setGameRunning(!1),document.getElementById("gameOverText").style.display="block",document.getElementById("playButton").innerText="Play",this.resetPosition()},1e3)}}class R{constructor(i,e){this.canvas=i,this.ctx=e,this.width=10,this.height=10,this.x=Math.random()*i.width,this.y=Math.random()*(i.height-200),this.speedX=(Math.random()-.5)*5,this.speedY=(Math.random()-.5)*5}draw(){this.ctx.fillStyle="black",this.ctx.fillRect(this.x,this.y,this.width,this.height),this.ctx.fillStyle="white";const i=Math.sin(Date.now()/100)*2;this.ctx.fillRect(this.x-i,this.y-5,5,10),this.ctx.fillRect(this.x+this.width+i,this.y-5,5,10)}update(){this.x+=this.speedX,this.y+=this.speedY,(this.x<0||this.x+this.width>this.canvas.width)&&(this.speedX*=-1),(this.y<0||this.y+this.height>this.canvas.height*.7)&&(this.speedY*=-1)}}const r=document.getElementById("gameCanvas"),l=r.getContext("2d");r.width=800;r.height=600;const u=new Audio("src/assets/sounds/game-music.mp3");u.loop=!0;u.volume=.5;let d=!1;function M(t){d=t}const f=[],n=new P(r,l,f,M),I=Array.from({length:5},()=>new R(r,l));let y=0;function L(){const t=document.querySelector(".info");t&&t.remove()}document.getElementById("playButton").addEventListener("click",()=>{d||(n.x=a[1].x+a[1].width/2-n.width/2,n.y=a[1].y-n.height,n.isDrowned=!1,y=0,document.getElementById("gameOverText").style.display="none",L()),d=!d,document.getElementById("playButton").innerText=d?"Pause":"Play",document.getElementById("playButton").blur()});document.addEventListener("keydown",t=>{t.code==="ArrowLeft"&&n.moveLeft(),t.code==="ArrowRight"&&n.moveRight(),t.code==="ArrowUp"&&(t.preventDefault(),n.jump())});document.addEventListener("keyup",t=>{(t.code==="ArrowLeft"||t.code==="ArrowRight")&&n.stop()});function g(){d?(l.clearRect(0,0,r.width,r.height),m(l,r),w(l),n.update(),n.draw(l),I.forEach(t=>{t.update(),t.draw(l),v(n,t)&&(y++,t.x=Math.random()*r.width,t.y=Math.random()*(r.height-200))}),p(l,y),f.forEach((t,i)=>{t.update(),t.draw(l),t.alpha<=0&&f.splice(i,1)}),u.play()):(u.pause(),u.currentTime=0),requestAnimationFrame(g)}g();
